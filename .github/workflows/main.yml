name: Python Code Runner # ì›Œí¬í”Œë¡œìš°ì˜ ì´ë¦„

on:
  push:
    branches: [ main, master ] # main ë˜ëŠ” master ë¸Œëœì¹˜ì— í‘¸ì‹œë  ë•Œ ì›Œí¬í”Œë¡œìš° ì‹¤í–‰
  pull_request:
    branches: [ main, master ] # main ë˜ëŠ” master ë¸Œëœì¹˜ë¡œ í’€ ë¦¬í€˜ìŠ¤íŠ¸ê°€ ë“¤ì–´ì˜¬ ë•Œ ì‹¤í–‰

  # ğŸ’¡ ìˆ˜ë™ ì‹¤í–‰ì„ ìœ„í•œ ì´ë²¤íŠ¸ ì¶”ê°€ (í•„ìˆ˜)
  workflow_dispatch:
    # ìˆ˜ë™ ì‹¤í–‰ ì‹œ ì‚¬ìš©ìì—ê²Œ ì…ë ¥ë°›ì„ ì¸ìˆ˜ê°€ ìˆë‹¤ë©´ ì—¬ê¸°ì— ì •ì˜í•©ë‹ˆë‹¤.
    # í˜„ì¬ëŠ” ì¸ìˆ˜ê°€ í•„ìš” ì—†ìœ¼ë¯€ë¡œ ë¹„ì›Œë‘¡ë‹ˆë‹¤.

jobs:
  run-python-script: # ì‹¤í–‰í•  ì‘ì—…(Job)ì˜ ID
    runs-on: ubuntu-latest # ì‘ì—…ì„ ì‹¤í–‰í•  í™˜ê²½ ì§€ì • (ê°€ì¥ ìµœì‹  ë²„ì „ì˜ Ubuntu ë¦¬ëˆ…ìŠ¤ í™˜ê²½ ì‚¬ìš©)

    steps:
      # 1. ì €ì¥ì†Œ ì½”ë“œ ì²´í¬ì•„ì›ƒ
      - name: Checkout code
        uses: actions/checkout@v4
        # ì €ì¥ì†Œì˜ ì½”ë“œë¥¼ Runner í™˜ê²½(Ubuntu)ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.

      # 2. Python í™˜ê²½ ì„¤ì •
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10' # ì‚¬ìš©í•  íŒŒì´ì¬ ë²„ì „ ì§€ì • (ì›í•˜ëŠ” ë²„ì „ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥)
      
      # 3. ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜ (ì„ íƒ ì‚¬í•­)
      # í”„ë¡œì íŠ¸ì— í•„ìš”í•œ íŒ¨í‚¤ì§€(ì˜ˆ: requirements.txt)ê°€ ìˆë‹¤ë©´ ì´ ë‹¨ê³„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    # 4. íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (í•µì‹¬)
      - name: Run main Python script
        run: |
          # code í´ë” ì•ˆì— ìˆëŠ” íŒŒì´ì¬ íŒŒì¼ì„ ì‹¤í–‰í•˜ë„ë¡ ê²½ë¡œ ìˆ˜ì •
          python codes/02.2ë‹¨ê³„.ipynb
          # python codes/preprocess.py
          # python codes/model_training.py
          # python codes/reporting.py
          
      # 5. ì‹¤í–‰ ê²°ê³¼ í™•ì¸ (ì„ íƒ ì‚¬í•­)
      # ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê²°ê³¼ë¡œ ìƒì„±ëœ íŒŒì¼ ë“±ì„ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      - name: Check execution status
        run: echo "Python script completed successfully."
